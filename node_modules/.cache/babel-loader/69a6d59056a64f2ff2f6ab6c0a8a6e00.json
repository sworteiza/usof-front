{"ast":null,"code":"var _jsxFileName = \"/Users/ysolovykh/Desktop/usof-front/usof/src/post_main.js\";\nimport React, { Component, createElement } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\nimport createComment from './create_comment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Post_main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.apiPost = \"http://localhost:8000/api/posts\";\n    this.apiUser = \"http://localhost:8000/api/users\";\n    this.apiComment = \"http://localhost:8000/api/comments\";\n    this.state = {\n      post: [],\n      cat: [],\n      comment: [],\n      imagefile: [],\n      like: []\n    };\n\n    this.like_create = event => {\n      event.preventDefault();\n      let token = Cookies.get('token');\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n      console.log(event.path);\n      axios.post(this.apiComment + '/' + '/like', {\n        \"type\": \"like\"\n      }).then(res => {\n        console.log(res);\n        window.location.reload();\n      });\n    };\n  }\n\n  componentDidMount() {\n    let token = Cookies.get('token');\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    axios.get(this.apiPost + \"/\" + Cookies.get('title_post')).then(res => {\n      const post = res.data;\n      this.setState({\n        post\n      });\n      console.log(res.data);\n    });\n    axios.get(this.apiPost + \"/\" + Cookies.get('title_post') + '/categories').then(res => {\n      let tmp = res.data[0];\n\n      for (let i = 0; i == i; i++) {\n        if (tmp[i] !== undefined) {\n          document.getElementById('category').innerHTML = tmp[i].title;\n          break;\n        }\n      }\n    });\n    axios.get(this.apiPost + \"/\" + Cookies.get('id_post') + '/comments').then(res => {\n      console.log(res.data);\n      const comment = res.data;\n      let i = 0;\n      comment.map(com => {\n        axios.get(this.apiUser + \"/\" + com.author + \"/avatar\", {\n          responseType: \"blob\"\n        }).then(resp => {\n          const prof_pic = URL.createObjectURL(resp.data);\n          document.getElementById(i).setAttribute(\"src\", prof_pic);\n          i++;\n        });\n      });\n      comment.count = comment.length;\n      console.log(comment.length);\n      this.setState({\n        comment\n      });\n    });\n    axios.get(this.apiPost + \"/\" + Cookies.get('id_post') + \"/like\").then(res => {\n      console.log(res.data);\n      const like = res.data;\n      this.setState({\n        like\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"shadow-sm p-3 mb-5 bg-white rounded card m-5 card-body d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"media mb-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"media-body ml-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: this.state.post.map(info => info.title)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"text-muted big\",\n                children: this.state.post.map(info => info.author)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"category\",\n                class: \"text-muted small\",\n                children: this.state.cat.map(info => info.title)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: this.state.post.map(info => info.content)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"card-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            class: \"d-inline-block text-muted ml-3 p-2\",\n            children: [\" \", this.state.like.length, \" Likes \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            class: \"d-inline-block text-muted ml-3\",\n            children: [\" \", this.state.comment.count, \" Comment(s) \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          class: \"\",\n          style: {\n            marginLeft: \"3rem\"\n          },\n          children: \"Answers:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Router, {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/create_comment\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              class: \"btn btn-outline-info\",\n              style: {\n                marginLeft: \"3rem\"\n              },\n              children: \"Create comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 52\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Switch, {\n            children: /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/create_comment\",\n              component: createComment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.comment.map((comm, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"d-flex flex-row m-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              id: index,\n              class: \"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15\",\n              style: {\n                width: \"50px\",\n                height: \"50px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-md-8 shadow-sm p-3 mb-5 bg-white rounded card card-body d-flex flex-column\",\n              style: {\n                marginLeft: \"1rem\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"media g-mb-30 media-comment\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"media-body u-shadow-v18 g-bg-secondary g-pa-30\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"g-mb-15\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      class: \"h5 g-color-gray-dark-v1 mb-0\",\n                      children: comm.author\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 112,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      class: \"g-color-gray-dark-v4 g-font-size-12 text-muted\",\n                      children: comm.created_at.substr(0, 10)\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: comm.content\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    class: \"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover\",\n                    style: {\n                      float: \"right\"\n                    },\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 138\n                    }, this), \" Likes \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/ysolovykh/Desktop/usof-front/usof/src/post_main.js"],"names":["React","Component","createElement","axios","Cookies","BrowserRouter","Router","Switch","Route","Link","createComment","Post_main","apiPost","apiUser","apiComment","state","post","cat","comment","imagefile","like","like_create","event","preventDefault","token","get","defaults","headers","common","console","log","path","then","res","window","location","reload","componentDidMount","data","setState","tmp","i","undefined","document","getElementById","innerHTML","title","map","com","author","responseType","resp","prof_pic","URL","createObjectURL","setAttribute","count","length","render","info","content","marginLeft","comm","index","width","height","created_at","substr","float"],"mappings":"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","sourcesContent":["import React, { Component, createElement } from 'react';\nimport axios from 'axios'\nimport Cookies from 'js-cookie';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\nimport createComment from './create_comment';\n\nexport default class Post_main extends Component {\n    apiPost = \"http://localhost:8000/api/posts\";\n    apiUser = \"http://localhost:8000/api/users\";\n    apiComment = \"http://localhost:8000/api/comments\";\n    state = {\n        post: [],\n        cat: [],\n        comment: [],\n        imagefile: [],\n        like: [],\n    }\n\n    like_create = event => {\n        event.preventDefault();\n        let token = Cookies.get('token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n        console.log(event.path);\n        axios.post(this.apiComment + '/' + '/like', { \"type\": \"like\" })\n            .then((res) => {\n                console.log(res);\n                window.location.reload();\n            })\n\n    }\n    componentDidMount() {\n        let token = Cookies.get('token');\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n        axios.get(this.apiPost + \"/\" + Cookies.get('title_post'))\n            .then(res => {\n                const post = res.data;\n                this.setState({ post });\n                console.log(res.data);\n            })\n        axios.get(this.apiPost + \"/\" + Cookies.get('title_post') + '/categories')\n            .then(res => {\n                let tmp = res.data[0];\n                for (let i = 0; i == i; i++) {\n                    if (tmp[i] !== undefined) {\n                        document.getElementById('category').innerHTML = tmp[i].title;\n                        break;\n                    }\n                }\n\n            })\n        axios.get(this.apiPost + \"/\" + Cookies.get('id_post') + '/comments')\n            .then(res => {\n                console.log(res.data);\n                const comment = res.data;\n                let i = 0;\n                comment.map((com) => {\n                    axios.get(this.apiUser + \"/\" + com.author + \"/avatar\", { responseType: \"blob\" })\n                        .then(resp => {\n                            const prof_pic = URL.createObjectURL(resp.data);\n                            document.getElementById(i).setAttribute(\"src\", prof_pic);\n                            i++;\n                        })\n                })\n                comment.count = comment.length;\n                console.log(comment.length);\n                this.setState({ comment });\n            })\n        axios.get(this.apiPost + \"/\" + Cookies.get('id_post') + \"/like\")\n            .then(res => {\n                console.log(res.data);\n                const like = res.data;\n                this.setState({ like });\n            })\n    }\n    render() {\n        return (\n            <div>\n                <div class=\"shadow-sm p-3 mb-5 bg-white rounded card m-5 card-body d-flex flex-column\">\n                    <div class=\"card-body\">\n                        <div class=\"media mb-3\">\n                            <div class=\"media-body ml-3\">\n                                <h3>{this.state.post.map(info => info.title)}</h3>\n                                <div class=\"text-muted big\">{this.state.post.map(info => info.author)}</div>\n                                <div id=\"category\" class=\"text-muted small\">{this.state.cat.map(info => info.title)}</div>\n                            </div>\n                        </div>\n                        <p>{this.state.post.map(info => info.content)}</p>\n                    </div>\n                    <div class=\"card-footer\">\n                        <a class=\"d-inline-block text-muted ml-3 p-2\"> {this.state.like.length} Likes </a>\n                        <a class=\"d-inline-block text-muted ml-3\"> {this.state.comment.count} Comment(s) </a>\n\n                    </div>\n                </div>\n\n                <div>\n                    <h3 class=\"\" style={{ marginLeft: \"3rem\" }}>Answers:</h3>\n                    <Router>\n                        <Link to=\"/create_comment\"><button type=\"button\" class=\"btn btn-outline-info\" style={{ marginLeft: \"3rem\" }}>Create comment</button></Link>\n                        <Switch>\n                            <Route path='/create_comment' component={createComment} />\n                        </Switch>\n                    </Router>\n                    <div>\n                        {this.state.comment.map((comm, index) => (\n                            <div class=\"d-flex flex-row m-5\">\n                                <img id={index} class=\"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15\" style={{ width: \"50px\", height: \"50px\" }}></img>\n                                <div class=\"col-md-8 shadow-sm p-3 mb-5 bg-white rounded card card-body d-flex flex-column\" style={{ marginLeft: \"1rem\" }}>\n                                    <div class=\"media g-mb-30 media-comment\">\n                                        <div class=\"media-body u-shadow-v18 g-bg-secondary g-pa-30\">\n                                            <div class=\"g-mb-15\">\n                                                <h5 key={index} class=\"h5 g-color-gray-dark-v1 mb-0\">{comm.author}</h5>\n                                                <span key={index} class=\"g-color-gray-dark-v4 g-font-size-12 text-muted\">{comm.created_at.substr(0, 10)}</span>\n                                            </div>\n\n                                            <p key={index}>{comm.content}</p>\n                                            <a class=\"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover\" style={{ float: \"right\" }}> <strong>0</strong> Likes </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}